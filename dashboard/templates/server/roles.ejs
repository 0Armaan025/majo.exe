<%- include("../includes/head", { bot, user, path, description, title: guild.name + " dashboard", twitter, url }) %>
<% if (guild.icon) {
 iconurl = `https://cdn.discordapp.com/icons/${guild.id}/${guild.icon}`;
} else {
 iconurl = `${secure_connection + domain}/pics/invaild-avatar.png`;
}
%>
<% const checked = "roles" %>
<%- include("../includes/side_nav", { bot, user, path, guild_name: guild.name, guild_icon: iconurl, checked_nav: checked, guild }) %>
<div class="content">
<% function checkdays(date) {
 let now = new Date();
 let diff = now.getTime() - date.getTime();
 let days = Math.floor(diff / 86400000);
 return days + (days == 1 ? " day" : " days") + " ago";
} %>
<div class="guild">
<img class="server-image img" src="<%= iconurl %>" alt="<%= guild.name %>"/>
<h1 class="server-name"><%= guild.name %></h1>
<p class="server-description"><%= guild.description %></p>
<hr>
<h2>Roles</h2>
<% 
 let startstring = "<span class='r' style='color:";
 let middlestring = "'>";
 let endstring = "</span>";
 let rolemap = guild.roles.cache
 .sort((a, b) => b.position - a.position)
 .map(r => startstring + r.hexColor + middlestring + r.name + endstring)
 .join(" "); %>
<% if (rolemap.length > 11024) {
 rolemap = "To many roles to display";
} %>
<% if (!rolemap) {
 rolemap = "No roles";
} %>
<%- rolemap -%>
</div>
<%- include("../includes/footer") %>
